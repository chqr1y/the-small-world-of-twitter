{"version":3,"sources":["Countries.js","Markers.js","ControlPanel.js","Map.js","TargetedInformation.js","TrendsTwitterPage.js","index.js"],"names":["Countries","properties","TW_WOEID","index","this","props","target","isTwitterTrendsAvailable","default","fill","getColor","outline","pressed","hover","geo","projection","path","name","twitterTrendsAvailable","woeid","NAME","setTarget","centroid","invert","setPosition","coordinates","zoom","geoUrl","onMouse","geography","geographies","map","style","getStyle","key","onMouseEnter","onMouseLeave","onClick","setCountry","React","Component","Circle","r","stroke","strokeWidth","defaultProps","Markers","markers","latitude","longitude","DefaultButton","children","WarningButton","height","width","background","SwitchButton","state","ControlPanel","buttons","reset","plus","minus","displayTowns","display","position","right","top","flexDirection","Map","tooltip","displayMarkers","bind","setTooltipContent","handleDisplayMarkers","setState","value","transform","data-tip","center","onMoveEnd","TargetedInformation","TrendsTwitterPage","isLoaded","error","fetch","then","res","json","data","filter","loc","placeType","marker","parentid","callback","getMarkers","App","maxWidth","margin","borderStyle","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d27cdb9e.chunk.js","sourcesContent":["import React from 'react'\nimport { Geographies, Geography } from \"react-simple-maps\";\n\nclass Countries extends React.Component {\n  isTwitterTrendsAvailable(properties) {return (properties.TW_WOEID !== -1)}\n  getColor(index, properties) {\n    const {target} = this.props;\n    if (target.index === index) {\n      return \"#0000FF\"\n    }\n    return this.isTwitterTrendsAvailable(properties) ? \"#1DA1F2\": \"#BBBBBB\";\n  }\n  getStyle(index, properties) {\n    return {\n      default: {\n        fill: this.getColor(index, properties),\n        outline: \"none\"\n      },\n      pressed: {\n        outline: \"none\"\n      },\n      hover: {\n        fill: \"#F53\",\n        outline: \"none\"\n      }\n    }\n  }\n  setCountry(index, geo, projection, path) {\n    const {properties} = geo;\n    let target = {\n      index:null,\n      name: null,\n      twitterTrendsAvailable: false,\n      woeid:null,\n    };\n    if (this.props.target.index !== index) {\n      target = {\n        index:index,\n        name: properties.NAME,\n        twitterTrendsAvailable: this.isTwitterTrendsAvailable(properties),\n        woeid:properties.TW_WOEID,\n      };\n    }\n    this.props.setTarget(target, () => {\n      if (this.props.target.index) {\n        const zoom = 4;\n        const centroid = projection.invert(path.centroid(geo));\n        this.props.setPosition({\n          coordinates:centroid,\n          zoom:zoom\n        });\n      }\n    });\n  }\n  render() {\n    const {geoUrl, onMouse} = this.props;\n    return (\n      <Geographies\n        geography={geoUrl}>\n        {({ geographies, projection, path }) =>\n          geographies.map((geo, index) => {\n            const {properties} = geo;\n            const style = this.getStyle(index, properties);\n            return (\n              <Geography\n                style={style}\n                key={index}\n                geography={geo}\n                onMouseEnter={() => {onMouse(geo.properties.NAME)}}\n                onMouseLeave={() => {onMouse(\"\")}}\n                onClick={() => {this.setCountry(index, geo, projection, path)}}\n              />\n            );\n          })\n        }\n      </Geographies>\n    );\n  }\n}\n\nexport default Countries\n","import React from \"react\";\nimport { Marker } from \"react-simple-maps\";\n\nclass Circle extends React.Component {\n  static defaultProps = {\n    zoom: 1,\n  };\n  render() {\n    const {zoom} = this.props;\n    return (\n      <circle r={3 / zoom}\n              fill=\"#F00\"\n              stroke=\"#fff\"\n              strokeWidth={0.5 / zoom}\n      />\n    );\n  }\n}\n\nclass Markers extends React.Component {\n  static defaultProps = {\n    zoom: 1,\n  }\n  render() {\n    const {markers, zoom, onMouse} = this.props;\n    return (\n      markers.map(\n        ({name, latitude, longitude}, index) => (\n          <Marker\n            key={index}\n            coordinates={[longitude, latitude]}\n            onMouseEnter={() => {onMouse(name);}}\n            onMouseLeave={() => {onMouse(\"\");}}\n          >\n            <Circle zoom={zoom}/>\n            />\n          </Marker>\n        )\n      )\n    );\n  }\n}\n\nexport default Markers;\n","import React from 'react';\n\nclass DefaultButton extends React.Component {\n  static defaultProps = {\n    style: {},\n  }\n  render() {\n    const {style, onClick, children} = this.props;\n    return (\n      <button style={style} onClick={onClick}>{children}</button>\n    );\n  }\n}\n\nclass WarningButton extends React.Component {\n  static defaultProps = {\n    style: {\n      height: '2rem',\n      width: '4rem',\n      background: '#ff5533'\n    },\n  }\n  render() {\n    const {style, onClick, children} = this.props;\n    return (\n      <DefaultButton style={style} onClick={onClick}>{children}</DefaultButton>\n    );\n  }\n}\n\nclass SwitchButton extends React.Component {\n  render() {\n    const {onClick, children, state} = this.props;\n    return (\n      <DefaultButton\n        style={{\n          \"textDecoration\": state ? \"none\" : \"line-through\"\n        }}\n        onClick={onClick}>\n        {children}\n      </DefaultButton>\n    );\n  }\n}\n\nclass ControlPanel extends React.Component {\n  static defaultProps = {\n    style: {\n      display: 'flex',\n      position: 'fixed',\n      right: '10px',\n      top: '10px',\n      flexDirection: 'column',\n    }\n  }\n  render() {\n    const {style} = this.props;\n    const {reset, plus, minus, displayTowns} = this.props.buttons;\n    return (\n      <div style={style}>\n        <div>\n          <WarningButton onClick={reset.onClick}>RESET</WarningButton>\n          <DefaultButton onClick={plus.onClick}>+</DefaultButton>\n          <DefaultButton onClick={minus.onClick}>-</DefaultButton>\n        </div>\n        <div>\n        <SwitchButton\n          onClick={displayTowns.onClick}\n          state={displayTowns.state}>Display Towns</SwitchButton>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ControlPanel;\n","import React from \"react\";\nimport { ZoomableGroup, ComposableMap } from \"react-simple-maps\";\nimport ReactTooltip from \"react-tooltip\";\n\nimport Countries from './Countries';\nimport Markers from './Markers';\nimport ControlPanel from './ControlPanel';\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tooltip: \"\",\n      position: {coordinates: [0, 0], zoom: 1},\n      displayMarkers: true,\n    };\n    this.setPosition = this.setPosition.bind(this);\n    this.setTooltipContent = this.setTooltipContent.bind(this);\n    this.handleDisplayMarkers = this.handleDisplayMarkers.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setPosition(position) {\n    this.setState((state) => {\n      return {\n        position: {\n          ...state.position,\n          ...position,\n      }}\n    });\n  }\n  setTooltipContent(value) {\n    this.setState({tooltip: value});\n  }\n  handleDisplayMarkers() {\n    this.setState((state) => {\n      return {displayMarkers: !(state.displayMarkers)}\n    });\n  }\n  reset() {\n    this.setState({\n      position: {\n        coordinates: [0,0],\n        zoom: 1,\n      },\n    }, () => {\n      this.props.setTarget(\n        {\n          twitterTrendsAvailable: false,\n          index:null,\n          woeid:null,\n          name: null,\n        }\n      );\n    });\n  }\n  render() {\n    const {geoUrl, target, setTarget, markers} = this.props;\n    const {displayMarkers, tooltip} = this.state;\n    const {coordinates, zoom} = this.state.position;\n    const style = {\n      transform: \"translateZ(0)\"\n    }\n    return (\n      <div style={style}>\n        <ComposableMap data-tip=\"\">\n          <ZoomableGroup\n            center={coordinates}\n            zoom={zoom}\n            onMoveEnd={this.setPosition}\n          >\n            <Countries\n              geoUrl={geoUrl}\n              target={target}\n              setTarget={setTarget}\n              onMouse={this.setTooltipContent}\n              setPosition={this.setPosition}\n            />\n            <Markers\n              zoom={zoom}\n              markers={displayMarkers ? markers : []}\n              onMouse={this.setTooltipContent}\n            />\n          </ZoomableGroup>\n        </ComposableMap>\n        <ReactTooltip>{tooltip}</ReactTooltip>\n        <ControlPanel\n          buttons={{\n            reset: {onClick: this.reset},\n            plus: {\n              onClick: () => {this.setPosition(\n                {zoom: zoom * 2}\n              )},\n            },\n            minus: {\n              onClick: () => {this.setPosition(\n                {zoom: zoom / 2}\n              )},\n            },\n            displayTowns: {\n              state: displayMarkers,\n              onClick: this.handleDisplayMarkers,\n            }\n          }}\n        />\n      </div>\n      );\n  }\n}\n\nexport default Map;\n","import React from 'react';\n\nclass TargetedInformation extends React.Component {\n  render() {\n    const {name, woeid, twitterTrendsAvailable} = this.props.target;\n    return (\n      <div>\n        <div>\n          <span>Name : {name}</span>\n        </div>\n        <div>\n          <span>Twitter Trends Available ? : {twitterTrendsAvailable ? \"YES\" : \"NO\"}</span>\n        </div>\n        <div>\n          <span>Twitter woeid : {woeid}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TargetedInformation;\n","import React from \"react\";\n\nimport Map from './Map';\nimport TargetedInformation from './TargetedInformation';\n\nconst geoUrl = \"https://raw.githubusercontent.com/chqr1y/twitter-locations-maps/master/ne_50m_admin_0_countries_and_twitter_woeid.json\"\nconst twitterLocationsUrl = \"https://raw.githubusercontent.com/chqr1y/the-small-world-of-twitter/master/data/twitter_available_locations.json\"\n\nclass TrendsTwitterPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      target : {\n        index: null,\n        name: null,\n        twitterTrendsAvailable: false,\n        woeid: null,\n      },\n      markers: [],\n      isLoaded: false,\n      error: null,\n    };\n    this.setTarget = this.setTarget.bind(this);\n  }\n  componentDidMount() {\n    fetch(twitterLocationsUrl)\n      .then(res => res.json())\n      .then(\n        (data) => {\n          this.setState({\n            isLoaded: true,\n            markers: data.filter(loc => loc.placeType.name === 'Town')\n          });\n        },(error) => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      );\n  }\n  getMarkers() {\n    const {target, markers} = this.state;\n    if (target.index === null) {\n      return markers\n    }\n    return (\n      markers.filter(marker =>\n          marker.parentid === target.woeid)\n    );\n  }\n  setTarget(target, callback) {\n    this.setState({\n      target : target\n    }, callback);\n  }\n  render() {\n    const style = {\n      \"borderStyle\": \"solid\",\n    };\n    const {target} = this.state;\n    return (\n      <div>\n        <div style={style}>\n          <Map\n            geoUrl={geoUrl}\n            markers={this.getMarkers()}\n            target={target}\n            setTarget={this.setTarget}\n          />\n        </div>\n        <div style={style}>\n          <TargetedInformation\n            target={target}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TrendsTwitterPage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport TrendsTwitterPage from './TrendsTwitterPage';\n\nclass App extends React.Component {\n  render() {\n    const style = {\n      width: \"90%\",\n      maxWidth: \"1200px\",\n      margin: \"auto\",\n      borderStyle: \"solid\",\n    }\n    return (\n      <div style={style}>\n        <TrendsTwitterPage />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}